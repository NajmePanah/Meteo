@* @model Portal.xShared.PartialViews
 *@
@{
    var currentPage = Model.CurrentPage;
    var totalPages = Model.TotalPage;
    var maxPagesToShow = 5;
    var half = maxPagesToShow / 2;
    var startPage = currentPage - half;
    var endPage = currentPage + half;

    if (startPage < 1)
    {
        endPage += (1 - startPage);
        startPage = 1;
    }
    if (endPage > totalPages)
    {
        startPage -= (endPage - totalPages);
        endPage = totalPages;
    }
    if (startPage < 1) startPage = 1;

    var queryParams = Context.Request.QueryString.ToString();
    var baseUrl = "/Front/" + ViewContext.RouteData.Values["controller"].ToString() + "/" + ViewContext.RouteData.Values["action"].ToString() + "/";
}

<div class="row">
    <div class="col-sm-12 col-md-6">
        <div class="dataTables_info" id="DataTables_Table_3_info" role="status" aria-live="polite">
            نمایش @(Math.Min(Model.TotalCount, ((Model.CurrentPage - 1) * Model.ItemsPerPage) + 1)) تا
            <span>@(Math.Min(Model.CurrentPage * Model.ItemsPerPage, Model.TotalCount))</span> از
            <span>@Model.TotalCount</span> آیتم
        </div>
    </div>
    @if(Model.TotalPage>1){
    <div class="col-sm-12 col-md-6">
        <div class="dataTables_paginate paging_simple_numbers" id="DataTables_Table_3_paginate">
            <ul class="pagination">
                @if (startPage > 1)
                {
                    <li class="paginate_button page-item">
                            <a href="@($"{baseUrl}1{queryParams}")" class="page-link need-loader">1</a>
                    </li>
                    @if (startPage > 2)
                    {
                        <li class="paginate_button page-item disabled">
                            <span class="page-link">...</span>
                        </li>
                    }
                }

                @for (int i = startPage; i <= endPage; i++)
                {
                    <li class="paginate_button page-item @(Model.CurrentPage == i ? "active" : "")">
                            <a href="@($"{baseUrl}{i}{queryParams}")" class="page-link need-loader">@i</a>
                    </li>
                }

                @if (endPage < totalPages)
                {
                    if (endPage < totalPages - 1)
                    {
                        <li class="paginate_button page-item disabled">
                            <span class="page-link">...</span>
                        </li>
                    }
                    <li class="paginate_button page-item">
                            <a href="@($"{baseUrl}{totalPages}{queryParams}")" class="page-link need-loader">@totalPages</a>
                    </li>
                }
            </ul>
        </div>
    </div>
    }
</div>
